{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sanskarkhare/Desktop/Family-budget-planner/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/sanskarkhare/Desktop/Family-budget-planner/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/sanskarkhare/Desktop/Family-budget-planner/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useReducer,createContext,useState}from'react';import AppReducer from'./AppReducer';import axios from'axios';var initialState={transactions:[],error:null,loading:true};export var GlobalContext=/*#__PURE__*/createContext(initialState);export var GlobalProvider=function GlobalProvider(_ref){var children=_ref.children;var _useReducer=useReducer(AppReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];function getTransactions(){return _getTransactions.apply(this,arguments);}function _getTransactions(){_getTransactions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/v1/transactions');case 3:res=_context.sent;dispatch({type:'GET_TRANSACTIONS',payload:res.data.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:'TRANSACTION_ERROR',payload:_context.t0.response.data.error});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _getTransactions.apply(this,arguments);}function addTransaction(_x){return _addTransaction.apply(this,arguments);}function _addTransaction(){_addTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(transaction){var config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'content-type':'application/json'}};_context2.prev=1;_context2.next=4;return axios.post('/api/v1/transactions',transaction,config);case 4:res=_context2.sent;dispatch({type:'ADD_TRANSACTION',payload:res.data.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:'TRANSACTION_ERROR',payload:_context2.t0.response.data.error});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return _addTransaction.apply(this,arguments);}function deleteTransaction(_x2){return _deleteTransaction.apply(this,arguments);}function _deleteTransaction(){_deleteTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/v1/transactions/\".concat(id));case 3:dispatch({type:'DELETE_TRANSACTION',payload:id});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);dispatch({type:'TRANSACTION_ERROR',payload:_context3.t0.response.data.error});case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return _deleteTransaction.apply(this,arguments);}return/*#__PURE__*/_jsx(GlobalContext.Provider,{value:{transactions:state.transactions,getTransactions:getTransactions,deleteTransaction:deleteTransaction,addTransaction:addTransaction,error:state.error,loading:state.loading},children:children});};","map":{"version":3,"sources":["C:/Users/sanskarkhare/Desktop/Family-budget-planner/client/src/context/GlobalState.js"],"names":["React","useReducer","createContext","useState","AppReducer","axios","initialState","transactions","error","loading","GlobalContext","GlobalProvider","children","state","dispatch","getTransactions","get","res","type","payload","data","response","addTransaction","transaction","config","headers","post","deleteTransaction","id","delete"],"mappings":"2jBAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,aAA5B,CAA2CC,QAA3C,KAA2D,OAA3D,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAGA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,YAAY,CAAE,EADG,CAEjBC,KAAK,CAAE,IAFU,CAGjBC,OAAO,CAAE,IAHQ,CAArB,CAOA,MAAO,IAAMC,CAAAA,aAAa,cAAGR,aAAa,CAACI,YAAD,CAAnC,CAEP,MAAO,IAAMK,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,iBAClBX,UAAU,CAACG,UAAD,CAAaE,YAAb,CADQ,4CACrCO,KADqC,iBAC9BC,QAD8B,yBAG9BC,CAAAA,eAH8B,uJAG7C,iLAE2BV,CAAAA,KAAK,CAACW,GAAN,CAAU,sBAAV,CAF3B,QAEeC,GAFf,eAISH,QAAQ,CAAC,CACLI,IAAI,CAAE,kBADD,CAELC,OAAO,CAAEF,GAAG,CAACG,IAAJ,CAASA,IAFb,CAAD,CAAR,CAJT,+EAUSN,QAAQ,CAAC,CACLI,IAAI,CAAE,mBADD,CAELC,OAAO,CAAE,YAAIE,QAAJ,CAAaD,IAAb,CAAkBZ,KAFtB,CAAD,CAAR,CAVT,oEAH6C,0DAoB7Bc,CAAAA,cApB6B,sJAoB5C,kBAA8BC,WAA9B,qIAEUC,MAFV,CAEmB,CACXC,OAAO,CAAE,CACL,eAAgB,kBADX,CADE,CAFnB,yCAQ0BpB,CAAAA,KAAK,CAACqB,IAAN,CAAW,sBAAX,CAAmCH,WAAnC,CAAgDC,MAAhD,CAR1B,QAQcP,GARd,gBAUYH,QAAQ,CAAC,CACLI,IAAI,CAAE,iBADD,CAELC,OAAO,CAAEF,GAAG,CAACG,IAAJ,CAASA,IAFb,CAAD,CAAR,CAVZ,mFAgBYN,QAAQ,CAAC,CACLI,IAAI,CAAE,mBADD,CAELC,OAAO,CAAE,aAAIE,QAAJ,CAAaD,IAAb,CAAkBZ,KAFtB,CAAD,CAAR,CAhBZ,sEApB4C,yDA2C7BmB,CAAAA,iBA3C6B,gKA2C5C,kBAAiCC,EAAjC,8JAGkBvB,CAAAA,KAAK,CAACwB,MAAN,gCAAqCD,EAArC,EAHlB,QAKYd,QAAQ,CAAC,CACLI,IAAI,CAAE,oBADD,CAELC,OAAO,CAAES,EAFJ,CAAD,CAAR,CALZ,kFAWQd,QAAQ,CAAC,CACLI,IAAI,CAAE,mBADD,CAELC,OAAO,CAAE,aAAIE,QAAJ,CAAaD,IAAb,CAAkBZ,KAFtB,CAAD,CAAR,CAXR,qEA3C4C,oDA8D5C,mBAAO,KAAC,aAAD,CAAe,QAAf,EAAwB,KAAK,CAAE,CAC9BD,YAAY,CAAEM,KAAK,CAACN,YADU,CAE9BQ,eAAe,CAAfA,eAF8B,CAG9BY,iBAAiB,CAAjBA,iBAH8B,CAI9BL,cAAc,CAAdA,cAJ8B,CAK9Bd,KAAK,CAAEK,KAAK,CAACL,KALiB,CAM9BC,OAAO,CAAEI,KAAK,CAACJ,OANe,CAA/B,UASEG,QATF,EAAP,CAYH,CA1EM","sourcesContent":["import React, { useReducer, createContext, useState } from 'react';\r\nimport AppReducer from './AppReducer';\r\nimport axios from 'axios';\r\n\r\n\r\nconst initialState = {\r\n    transactions: [], \r\n    error: null,\r\n    loading: true,\r\n\r\n}\r\n\r\nexport const GlobalContext = createContext(initialState);\r\n\r\nexport const GlobalProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(AppReducer, initialState)\r\n\r\n   async function getTransactions() {\r\n        try {\r\n            const res = await axios.get('/api/v1/transactions');\r\n\r\n            dispatch({\r\n                type: 'GET_TRANSACTIONS',\r\n                payload: res.data.data,\r\n            })\r\n        }\r\n        catch (err) {\r\n            dispatch({\r\n                type: 'TRANSACTION_ERROR',\r\n                payload: err.response.data.error\r\n            })\r\n        }\r\n    }\r\n\r\n    async function addTransaction(transaction){\r\n        \r\n        const config = {\r\n            headers: {\r\n                'content-type': 'application/json',\r\n            }\r\n        }\r\n        try{\r\n            const res = await axios.post('/api/v1/transactions', transaction, config);\r\n\r\n                dispatch({\r\n                    type: 'ADD_TRANSACTION',\r\n                    payload: res.data.data,\r\n                })\r\n            }   \r\n            catch(err) {\r\n                dispatch({\r\n                    type: 'TRANSACTION_ERROR',\r\n                    payload: err.response.data.error\r\n                })\r\n            }\r\n    }\r\n\r\n    async function deleteTransaction(id) {\r\n\r\n        try {\r\n                await axios.delete(`/api/v1/transactions/${id}`);\r\n\r\n                dispatch({\r\n                    type: 'DELETE_TRANSACTION',\r\n                    payload: id\r\n                })\r\n        }\r\n        catch (err) {\r\n            dispatch({\r\n                type: 'TRANSACTION_ERROR',\r\n                payload: err.response.data.error\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    return(<GlobalContext.Provider value={{\r\n            transactions: state.transactions,\r\n            getTransactions,\r\n            deleteTransaction,\r\n            addTransaction,\r\n            error: state.error,\r\n            loading: state.loading\r\n            \r\n    }}>\r\n            {children}\r\n        </GlobalContext.Provider>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}